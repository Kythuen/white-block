import{K as L}from"./keys.DacL9R4k.js";import{u as T,a as W}from"./style.DVjA9Ywn.js";import{b as A,u as B}from"./node.BJaJuXFC.js";import{R as V,D as k,L as w,S as z}from"./api.DwkIGh4A.js";import O from"./api._NxoufMi.js";import{d as P,a3 as x,p as d,X as I,c as K,o as M,r as U,G as X,N as j,k as y,n as q,s as G}from"./framework.CDmdpyHB.js";const Y={...z,...w,...k,...V,...O},te=P({name:"WbForm",__name:"form",props:x({rules:{},data:{},layout:{},labelWidth:{},labelAlign:{},allowTypes:{},onSubmit:{type:Function},onReset:{type:Function},default:{type:[String,Object,Function]},size:{},loading:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean}},Y),emits:["submit","reset","click"],setup(b,{expose:D,emit:h}){const a=b,m=h,R=T({valueProps:["layout"],nameValueProps:["labelAlign"]}),v=W(),S=B(),g=()=>S("default",{allowNodeTypes:a.allowTypes||["WbFormItem"]}),F=A();function _(){var o;const e={},t=[];for(const r of F){const s=r.props;if(!(s!=null&&s.name))continue;const i=[...s.rules||[],...((o=a.rules)==null?void 0:o[s.name])||[]];i.length&&(t.push({...s,rules:i}),e[s.name]=i)}return{map:e,list:t}}const{list:E}=_(),p=d(0),f={pass:!0,errors:[]},l=d({...f});I(L,{labelWidthForm:a.labelWidth,labelWidth:p,formValidate:l});function N(e){e.preventDefault(),u(),n=G(()=>u()),m("submit",{data:a.data,validate:l.value})}function C(e){e.preventDefault(),c(),m("reset",{data:a.data})}let n;function u(){const e=[];for(const t of E)t.rules.some(o=>{var r;return o.required&&!((r=a.data)!=null&&r[t.name])?(e.push({prop:t.name,type:o.type,message:o.message}),!0):!1});l.value={pass:e.length===0,errors:e}}function c(){n==null||n(),l.value={...f}}return D({validate:u,clearValidate:c}),(e,t)=>(M(),K("form",{class:q(y(R)),style:j(y(v)),flex:"~ col",onSubmit:N,onReset:C},[U(e.$slots,"default",{labelWidth:p.value},()=>[X(g)])],38))}});export{te as default};
