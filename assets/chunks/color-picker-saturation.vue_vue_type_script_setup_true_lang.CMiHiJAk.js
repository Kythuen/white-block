import{d as B,t as O}from"./common.CZky7v_H.js";import{o as f,a as p}from"./dom.Ze_sGonF.js";import{d as V,p as d,v as $,$ as z,c as H,o as j,N as k,j as c}from"./framework.CDmdpyHB.js";const U=V({name:"ColorPickerSaturation",__name:"color-picker-saturation",props:{defaultValue:{type:Object,default:()=>({x:0,y:0})},selectedColor:{type:String,default:"#ff0000"},panelColor:{type:String,default:"#ff0000"}},emits:["change"],setup(m,{emit:x}){const v=m,g=x,r=d(),R=d();let e=null,u=!1,h=0,w=0,i=0,s=0;const o=d(0),l=d(0);function C(n){n.stopPropagation(),u=!0,h=n.clientX,w=n.clientY,o.value=n.clientX-e.right,l.value=n.clientY-e.top,i=o.value,s=l.value,g("change",{x:-(o.value/e.width)*100,y:l.value/e.height*100}),f(document.body,"mousemove",y)}function X(n){if(!u)return;u=!0;let t=n.clientX-h+i,a=n.clientY-w+s;t<-e.width?t=-e.width:t>0&&(t=0),a<0?a=0:a>e.height&&(a=e.height),o.value=t,l.value=a,g("change",{x:-(o.value/e.width)*100,y:l.value/e.height*100})}const y=O(X,21);function Y(){u=!1,i=o.value,s=l.value,p(document.body,"mousemove",y)}function b(){e=r.value.getBoundingClientRect()}const S=B(b,300);return $(()=>{b(),v.defaultValue&&(o.value=-e.width*(v.defaultValue.x/100),i=o.value,l.value=e.height*(v.defaultValue.y/100),s=l.value),f(r.value,"mousedown",C),f(document.body,"mouseup",Y),f(window,"resize",S)}),z(()=>{p(r.value,"mousedown",C),p(window,"resize",S)}),(n,t)=>(j(),H("div",{ref_key:"ColorSaturationRef",ref:r,relative:"",w:"full",h:"40",rounded:"$comp-radius-sm",overflow:"hidden",select:"none",style:k({background:m.panelColor})},[t[1]||(t[1]=c("div",{absolute:"",inset:"0",w:"full",h:"full",style:{background:"linear-gradient(90deg, #fff, transparent)"}},null,-1)),t[2]||(t[2]=c("div",{absolute:"",inset:"0",w:"full",h:"full",style:{background:"linear-gradient(0deg, #000, transparent)"}},null,-1)),c("div",{ref_key:"ColorSaturationHandlerRef",ref:R,absolute:"",top:"-2",right:"-2",shadow:"sm black",rounded:"full",select:"none",style:k({transform:`translate3d(${o.value}px, ${l.value}px, 0)`})},t[0]||(t[0]=[c("div",{w:"4",h:"4",rounded:"full",ring:"2 inset $wb-color-foreground",cursor:"pointer"},null,-1)]),4)],4))}});export{U as _};
